(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{449:function(a,t,e){"use strict";e.r(t);var s=e(6),r=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"oracle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oracle"}},[a._v("#")]),a._v(" Oracle")]),a._v(" "),e("h2",{attrs:{id:"query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[a._v("#")]),a._v(" Query")]),a._v(" "),e("h3",{attrs:{id:"exchange-rates-of-luna"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exchange-rates-of-luna"}},[a._v("#")]),a._v(" Exchange Rates of LUNA")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle exchange-rates\n")])])]),e("h3",{attrs:{id:"votes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#votes"}},[a._v("#")]),a._v(" Votes")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle votes "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("denom"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"prevotes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prevotes"}},[a._v("#")]),a._v(" Prevotes")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle prevotes "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("denom"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"active-denoms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#active-denoms"}},[a._v("#")]),a._v(" Active Denoms")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle actives\n")])])]),e("h3",{attrs:{id:"feeder-account"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#feeder-account"}},[a._v("#")]),a._v(" Feeder Account")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle feeder "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator-addr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"miss-counter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#miss-counter"}},[a._v("#")]),a._v(" Miss Counter")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle miss "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator-addr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"aggregate-prevotes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aggregate-prevotes"}},[a._v("#")]),a._v(" Aggregate Prevotes")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle aggregate-prevote "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator-addr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"aggregate-votes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aggregate-votes"}},[a._v("#")]),a._v(" Aggregate Votes")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle aggregate-vote "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator-addr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"vote-targets"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vote-targets"}},[a._v("#")]),a._v(" Vote Targets")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle vote-targets\n")])])]),e("h3",{attrs:{id:"tobin-taxes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tobin-taxes"}},[a._v("#")]),a._v(" Tobin Taxes")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle tobin-taxes\n")])])]),e("h3",{attrs:{id:"parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[a._v("#")]),a._v(" Parameters")]),a._v(" "),e("p",[a._v("You can get the oracle module's parameters:")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("terracli query oracle params\n")])])]),e("p",[a._v("The reported parameters will be of the following format:")]),a._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("vote_period")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("vote_threshold")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.500000000000000000"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reward_band")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.020000000000000000"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reward_distribution_window")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5256000")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("whitelist")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ukrw\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("tobin_tax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.002500000000000000"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" usdr\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("tobin_tax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.002500000000000000"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" uusd\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("tobin_tax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.002500000000000000"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" umnt\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("tobin_tax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.020000000000000000"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("slash_fraction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.000100000000000000"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("slash_window")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100800")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("min_valid_per_window")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.050000000000000000"')]),a._v("\n")])])]),e("h2",{attrs:{id:"transaction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transaction"}},[a._v("#")]),a._v(" Transaction")]),a._v(" "),e("h3",{attrs:{id:"submit-an-exchange-rate-vote"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#submit-an-exchange-rate-vote"}},[a._v("#")]),a._v(" Submit an Exchange Rate Vote")]),a._v(" "),e("p",[a._v("Validators must submit two exchange rate vote transactions to participate in the oracle; a "),e("code",[a._v("prevote")]),a._v(" containing the hash of the actual vote in the first vote period, and a "),e("code",[a._v("vote")]),a._v(" containing the salt of the hash submitted in the prevote phase to prove honestly. The hash is the leading 20 bytes of the SHA256 hexa string run over the string of the format "),e("code",[a._v("salt:price:denom:validator-address")]),a._v(".\ni\nTo submit a prevote, run:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("terracli tx oracle prevote "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("salt"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("price"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator_address"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --from mykey\n")])])]),e("p",[a._v("After "),e("code",[a._v("VotePeriod")]),a._v(" has expired from the submission of the prevote, the voter must submit the actual exchange rate vote. To do so, run:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("terracli tx oracle vote "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("salt"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("price"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator_address"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --from mykey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --validator "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("validator-address"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("p",[a._v("Where price is the form of Coin "),e("code",[a._v("8890.32ukrw")])]),a._v(" "),e("p",[a._v("Given that oracle votes have to be submitted in a feed over short time intervals (30 seconds), prevotes and votes will need to be submitted via some persistent server daemon, and not manually. For more information on how to do this, read the "),e("RouterLink",{attrs:{to:"/validator/oracle.html"}},[a._v("Exchange Rate Oracle")]),a._v(" section of the Validator Handbook, and the "),e("RouterLink",{attrs:{to:"/dev/spec-oracle.html"}},[a._v("Oracle Module Specification")]),a._v(".")],1),a._v(" "),e("h3",{attrs:{id:"delegate-exchange-rate-voting-rights"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delegate-exchange-rate-voting-rights"}},[a._v("#")]),a._v(" Delegate Exchange Rate Voting Rights")]),a._v(" "),e("p",[a._v("A voter may also elect to delegate exchange rate voting to another signing key.")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("terracli tx oracle set-feeder "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("feeder_address"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --from"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mykey\n")])])]),e("p",[a._v("where "),e("code",[a._v("feeder_address")]),a._v(" is the address you want to delegate your voting rights to. Note that the feeder will still need to submit votes on behalf of your validator in order for you to get credit.")])])}),[],!1,null,null,null);t.default=r.exports}}]);